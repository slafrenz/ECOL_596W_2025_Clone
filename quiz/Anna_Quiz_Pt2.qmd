---
title: "Quiz 1: Part 2"
format: html
editor: visual
embed-resources: true
css: |
      <style>
        body { font-family: Arial, sans-serif; }
      </style>
js: |
      <script>
        console.log('Custom JavaScript loaded.');
      </script>
---

## Part 2: Coding in action

### Instructions

Please answer these questions in R using whatever syntax makes sense to you. Feel free to use the R help pages and/or notes from class.

**If you use Google or ChatGPT etc. to help you get to an answer, please note so on your answer**

Submit your answers as an html file. Name it "lastname_quiz1.html". Two submission options:\
1. Create a branch in your forked-and-cloned class repo. Add the html file to the student_contributions/ folder. Submit a pull request to Sabrina (preferred); 2. Email it to mcnew\@arizona.edu (if github is really giving you a headache)

```{r, message = F}
# load packages and data 
library(ggplot2)
library(dslabs)
library(dplyr)
```

#### Load your data:

Load the *swallows.csv* into R, call it swallows. This data frame lists results of an experiment on tree swallows. Each row is a nest. Nests were put into one of two **treatments**: simulated predation (predator), or control (control). Along with treatment you have the following columns:\
**nest_fate** = whether the nest fledged any young or whether they all died\
**brood** = number of nestlings\
**n_fledged** = number of nestlings that fledged.

You also have a separate data frame called *brightness.csv* where each row lists the plumage brightness (a sexual signal) for the female at each nest. Load this one up too.

```{r}
# Answer 
swallows <- read.csv("swallows.csv")
brightness <- read.csv("brightness.csv")

# Google? N



```

#### Wrangle your data

You realize that you want to add brightness information onto your main swallows data frame. Join these data frames using nest_id as your key variable. Describe how you would check to make sure this join worked as intended.undefined

```{r}
#Answer

swallows <- swallows |> rename(nest_id=nestbox)

brightness <- brightness |> rename(nest_id=nestbox)

swallows_full <- full_join(swallows,brightness)

# I inspected the dataframe and saw that the columns had combined, and that the nest_id name for the column remained through the join.

#Google? N


```

Inspect your combined data frame. Do some sort of quick sanity check on each column to catch any obvious entry errors. Correct as necessary

```{r}
# Answer
str(swallows_full)

#comparisons between old and new data frames
table(swallows_full$treatment)
table(swallows$treatment)

max(swallows_full$brood)
max(swallows$brood)

min(swallows_full$n_fledged)
min(swallows$n_fledged)

# Google y/n N
```

Create a new column called prop_fledged that contains the proportion of nestlings that fledged from each nest.

```{r}
#Answer

swallows_full <- swallows_full |> mutate(prop_fledged = n_fledged/brood)

# Google? y/n N

```

#### Explore the data

What was the mean proportion of nestlings fledged in each treatment?

```{r}
# Answer 
swallows_full |> summarize(mean(prop_fledged, na.rm=TRUE), .by = treatment)

# Google? y/n N

```

Create a plot showing fledging success differences between treatments

```{r}
# Answer

fledge_success <- swallows_full |> ggplot(aes(x=treatment, y=prop_fledged, fill=treatment)) + geom_boxplot()

fledge_success

# Google? y/n


```

Is there any evidence that female brightness influenced fledging success? Create a plot to visually investigate this question.

```{r}
# Answer

fledge_success_bright <- swallows_full |> ggplot(aes(x=brightness, y=prop_fledged, fill=brightness)) + geom_point()

fledge_success_bright

cor.test(swallows_full$brightness,swallows_full$prop_fledged)

#No evidence of relationship

# Google? y/n N

```
